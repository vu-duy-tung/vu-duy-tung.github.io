{% comment %}
  Unified education entry renderer for both RenderCV and JSONResume formats
  Handles both:
  - RenderCV: institution, area, studyType (or degree), start_date, end_date, location, courses, highlights
  - JSONResume: institution, area, studyType, startDate, endDate, location, courses, highlights
{% endcomment %}

<ul class="card-text font-weight-light list-group list-group-flush">
  {% for entry in entries %}
    <li class="list-group-item">
      {% capture start_date %}
        {% if entry.start_date %}{{ entry.start_date }}{% elsif entry.startDate %}{{ entry.startDate }}{% endif %}
      {% endcapture %}
      {% capture end_date %}
        {% if entry.end_date %}{{ entry.end_date }}{% elsif entry.endDate %}{{ entry.endDate }}{% endif %}
      {% endcapture %}

      {% if start_date != '' %}
        {% comment %} Extract year only from dates like "1933-01-01" or just use "1933" as is {% endcomment %}
        {% assign startDate = start_date | split: '-' | first %}
        {% assign endDate = end_date | split: '-' | first | default: 'Present' %}
        {% assign date = startDate | append: ' - ' | append: endDate %}
      {% else %}
        {% assign date = null %}
      {% endif %}

      {% capture location %}
        {% if entry.location %}{{ entry.location }}{% endif %}
      {% endcapture %}

      <div class="row">
        {% if date %}
          <div class="col-xs-2 col-sm-2 col-md-2 text-center">
            <table class="table-cv">
              <tbody>
                <tr>
                  <td>
                    <span class="badge font-weight-bold danger-color-dark text-uppercase align-middle" style="min-width: 75px">{{ date }}</span>
                  </td>
                </tr>
                {% if entry.logo %}
                  <tr>
                    <td>
                      <img src="{{ entry.logo }}" alt="Institution logo" style="width: 75px; height: auto; margin-top: 0.5rem;">
                    </td>
                  </tr>
                {% endif %}
              </tbody>
            </table>
          </div>
          <div class="col-xs-10 col-sm-10 col-md-10 mt-2 mt-md-0">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                {% capture study_type %}
                  {% if entry.studyType %}{{ entry.studyType }}{% elsif entry.degree %}{{ entry.degree }}{% endif %}
                {% endcapture %}

                {% if entry.url %}
                  <h6 class="title font-weight-bold ml-1 ml-md-4" style="margin-top: 0; margin-bottom: 0;">
                    <a href="{{ entry.url }}">{{ study_type }}</a>
                  </h6>
                {% elsif study_type != '' %}
                  <h6 class="title font-weight-bold ml-1 ml-md-4" style="margin-top: 0; margin-bottom: 0;">{{ study_type }}</h6>
                {% endif %}
              </div>
              {% if location != '' %}
                <div class="text-right">
                  <span style="font-size: 0.9rem;">
                    <i class="fa-solid fa-location-dot"></i>
                    {{ location }}
                  </span>
                </div>
              {% endif %}
            </div>

            {% if entry.institution %}
              <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem">{{ entry.institution }}</h6>
            {% endif %}

            {% if entry.area %}
              <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem; font-style: italic">{{ entry.area }}</h6>
            {% endif %}

            {% if entry.courses or entry.highlights %}
              <ul class="items">
                {% for item in entry.courses %}
                  <li>
                    <span class="item">{{ item }}</span>
                  </li>
                {% endfor %}
                {% for item in entry.highlights %}
                  <li>
                    <span class="item">{{ item | markdownify | remove: '<p>' | remove: '</p>' }}</span>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% else %}
          <div class="col-xs-12 col-sm-12 col-md-12">
            {% if location != '' %}
              <div class="text-right mb-2">
                <span style="font-size: 0.9rem;">
                  <i class="fa-solid fa-location-dot"></i>
                  {{ location }}
                </span>
              </div>
            {% endif %}

            {% capture study_type %}
              {% if entry.studyType %}{{ entry.studyType }}{% elsif entry.degree %}{{ entry.degree }}{% endif %}
            {% endcapture %}

            {% if entry.url %}
              <h6 class="title font-weight-bold ml-1 ml-md-4">
                <a href="{{ entry.url }}">{{ study_type }}</a>
              </h6>
            {% elsif study_type != '' %}
              <h6 class="title font-weight-bold ml-1 ml-md-4">{{ study_type }}</h6>
            {% endif %}

            {% if entry.institution %}
              <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem">{{ entry.institution }}</h6>
            {% endif %}

            {% if entry.area %}
              <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem; font-style: italic">{{ entry.area }}</h6>
            {% endif %}

            {% if entry.courses or entry.highlights %}
              <ul class="items">
                {% for item in entry.courses %}
                  <li>
                    <span class="item">{{ item }}</span>
                  </li>
                {% endfor %}
                {% for item in entry.highlights %}
                  <li>
                    <span class="item">{{ item | markdownify | remove: '<p>' | remove: '</p>' }}</span>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endif %}
      </div>
    </li>
  {% endfor %}
</ul>
